# Enhoymap
DJango web-приложение с картой и координатными метками. Метки соответствуют записям в БД приложения.

## Установка

Требуется Python 3.10. Следуйте этим шагам для установки и запуска проекта на вашем локальном компьютере:

### Клонирование репозитория

```bash
git clone https://github.com/Skripko-A/enjoymap.git
cd enjoymap
```

### Создание виртуального окружения

```bash
python -m venv .venv
source venv/bin/activate  # Для Windows используйте `venv\Scripts\activate`
```

### Установка зависимостей

```bash
pip install -r requirements.txt
```

### Переменные окружения

Вам нужно спрятать в файле .env три переменных:
`SECRET_KEY` - Секретный ключ для конкретной установки Django. Он используется для 
криптографической подписи и должен быть установлен в уникальное, непредсказуемое 
значение.

`ALLOWED_HOSTS` - Список строк, представляющих имена хостов/доменов, которые этот 
сайт Django может обслуживать. Это мера безопасности, предотвращающая атаки через 
заголовок HTTP Host, которые возможны даже при кажущихся безопасными конфигурациях
веб-сервера.

`DEBUG` - Булевое значение, которое включает/выключает режим отладки. Если ваше 
приложение вызывает исключение, когда DEBUG установлен в True, Django отобразит 
подробную трассировку, включая множество метаданных о вашей среде, таких как все 
текущие настройки Django (из `settings.py`). Включайте эту настройку в положение True
только в режиме разработки. На сервере `DEBUG` нужно выключать

Создайте файл .env в корне проекта, запишите туда эти переменные и их значения:
```
SECRET_KEY = 'your_secret_key_here'
ALLOWED_HOSTS = ['127.0.0.1', 'ip or hostname']
DEBUG = True (development) / False (production)
```

### Настройка базы данных

Создайте базу данных и примените миграции:

```bash
python manage.py places makemigrations
python manage.py migrate
```

### Создание суперпользователя

Создайте суперпользователя для доступа к админ-панели Django:

```bash
python manage.py createsuperuser
```

### Запуск сервера разработки

Запустите сервер разработки:

```bash
python manage.py runserver
```

Откройте браузер и перейдите по адресу `http://127.0.0.1:8000/` для просмотра приложения.  
В случае неполадок установите значение параметра `DEBUG` в файле `settings.py` в положение `True`
## Использование
###  Панель админа
1. Войдите в админ-панель по адресу `http://127.0.0.1:8000/admin/` с использованием учетных данных суперпользователя.
2. Добавьте новые метки через интерфейс админ-панели.
3. Перейдите на главную страницу приложения для просмотра карты с метками.

###  Программное добавление записей в БД для меток на карте
Для manage.py написана команда load_place создающая новую локацию в БД, которая сразу отображается на карте.
Аргументом для команды служит ссылка на json файл с нужными данными о локации.
Формат файла:

```
{
    "title": "Название локации",
    "imgs": [список ссылок на изображения],
    "description_short": 'короткое описание'
    "description_long": 'длинное описание'
    "coordinates": {
        "lng": "долгота",
        "lat": "широта"
    }
}
```
В терминале:
```commandline
cd project_folder
source .venv/bin/activate
python3 manage.py load_place https://ссылка.на_ваш_файл.json
```
Завершение добавления локации будет отмечено в терминале соответствующим сообщением.